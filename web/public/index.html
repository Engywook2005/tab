<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <% if (process.env.REACT_APP_WHICH_APP === "newtab"){ %>
      <link rel="shortcut icon" href="%PUBLIC_URL%/favicon.ico" />
    <% } %>
    <% if (process.env.REACT_APP_WHICH_APP === "search"){ %>
      <link rel="shortcut icon" href="%PUBLIC_URL%/search-favicon.png" />
    <% } %>

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta name="theme-color" content="#000000" />
    <!--
      manifest.json provides metadata used when your web app is added to the
      homescreen on Android. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />
    <!--
      Notice the use of %PUBLIC_URL% in the tags above.
      It will be replaced with the URL of the `public` folder during the build.
      Only files inside the `public` folder can be referenced from the HTML.

      Unlike "/favicon.ico" or "favicon.ico", "%PUBLIC_URL%/favicon.ico" will
      work correctly both with client-side routing and a non-root public URL.
      Learn how to configure a non-root public URL by running `npm run build`.
    -->
    
    <% if (process.env.REACT_APP_WHICH_APP === "newtab"){ %>
      <title>Tab for a Cause</title>
    <% } %>

    <% if (process.env.REACT_APP_WHICH_APP === "search"){ %>
      <title>Search for a Cause</title>
    <% } %>

    <% if (process.env.REACT_APP_MEASURE_TIME_TO_INTERACTIVE === "true"){ %>
    <!--
      @gladly-customization:
      Set up the TTI polyfill for non-production environments:
      https://github.com/GoogleChromeLabs/tti-polyfill
    -->
    <script>
    /* eslint-disable */
    !function(){if('PerformanceLongTaskTiming' in window){var g=window.__tti={e:[]};
    g.o=new PerformanceObserver(function(l){g.e=g.e.concat(l.getEntries())});
    g.o.observe({entryTypes:['longtask']})}}();
    </script>
    <% } %>

    <!--
      @gladly-customization:
      global style for all served HTML
    -->
    <style>
      html, body {
        padding: 0px;
        margin: 0px;
      }
      html {
        min-height: 100%;
        position: relative;
      }
      /*
        Some 3rd-party (e.g. Quantcast Choice) code creates iframes with
        borders, which causes a flickering frame.
       */
      iframe {
        border-width: 0px !important;
      }
    </style>

    <% if (process.env.REACT_APP_WHICH_APP === "search"){ %>
    <!--
      @gladly-customization:
      YPA script for search results.
    -->
    <script src="https://s.yimg.com/uv/dm/scripts/syndication.js" />
    <% } %>

    <!--
      @gladly-customization:
      The new tab page may be displayed in an iframe, so open
      all links in the top frame.
    -->
    <base target="_top">

    <% if (process.env.REACT_APP_WHICH_APP === "search"){ %>
    <!--
      @gladly-customization:
      Include Roboto for the search results styling. We cannot currently
      use react-helmet to add this link because of this bug in v5:
      https://github.com/nfl/react-helmet/issues/373
    -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css?family=Roboto:300,400,500"
    />
    <% } %>

    <!--
      @gladly-customization:
      Google Global Site Tag (gtag.js) - AdWords: 1013744060 
    -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-1013744060"></script>
    <script>
      /* eslint-disable */
     window.dataLayer = window.dataLayer || [];
     function gtag(){dataLayer.push(arguments);}
     gtag('js', new Date());
     gtag('config', 'AW-1013744060');
    </script>

    <% if (process.env.REACT_APP_WHICH_APP === "newtab"){ %>
    <!--
      @gladly-customization:
      Reddit conversion pixel
    -->
    <script>
    /* eslint-disable */
    !function(w,d){if(!w.rdt){var p=w.rdt=function(){p.sendEvent?p.sendEvent.apply(p,arguments):p.callQueue.push(arguments)};p.callQueue=[];var t=d.createElement("script");t.src="https://www.redditstatic.com/ads/pixel.js",t.async=!0;var s=d.getElementsByTagName("script")[0];s.parentNode.insertBefore(t,s)}}(window,document);rdt('init','t2_9btvy');
    </script>
    <% } %>
  </head>
  <body>
    <script type="text/javascript">
      /* eslint-disable */
      // MEASURING PERFORMANCE
      window.debug = {}
      var t = performance.now()
      console.log('inline', t)
      window.debug.inline = t
    </script>

    <noscript>You need to enable JavaScript to run this app.</noscript>
    <% if (process.env.REACT_APP_WHICH_APP === "search"){ %>
    <!--
      @gladly-customization:
      Search for a Cause global variable
    -->
    <script type="text/javascript">
      /* eslint-disable */
      (() => {
        window.searchforacause = window.searchforacause || {
          // We rely on this in the SearchResults component.
          search: {
            fetchedOnPageLoad: false,
            YPAErrorOnPageLoad: null,
          },
          // TODO
          // We rely on this in the SearchResultsQueryBing component.
          // queryRequest: {
          //   inProgress: false,
          //   complete: false,
          //   usedOnPageLoad: false,
          //   result: null,
          // },
          extension: {
            isInstalled: false,
          },
        }
      })()
    </script>
    <% } %>

    <div id="root"></div>

    <!--
      @gladly-customization:
      MaxMind for determining country location. Used to manage EU
      privacy settings for advertising and also to set market settings
      in search results.
    -->
    <script src="//js.maxmind.com/js/apis/geoip2/v2.1/geoip2.js" type="text/javascript"></script>

    <% if (process.env.REACT_APP_WHICH_APP === "newtab"){ %>
    <!--
      @gladly-customization:
      Facebook Pixel Code
    -->
    <script>
    /* eslint-disable */
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
    document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '1813501258922708');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=1813501258922708&ev=PageView&noscript=1"
    /></noscript>
    <% } %>

    <% if (process.env.REACT_APP_WHICH_APP === "newtab"){ %>
    <!--
      @gladly-customization:
      Google Publisher Tag
    -->
    <script type="text/javascript">
      /* eslint-disable */
      // Google Tag Manager
      var googletag = window.googletag || {}
      googletag.cmd = googletag.cmd || []
      googletag.cmd.push(() => {
        googletag.pubads().disableInitialLoad()
      })

      var gads = document.createElement('script')
      gads.async = true
      gads.type = 'text/javascript'
      var useSSL = document.location.protocol === 'https:'
      gads.src = (useSSL ? 'https:' : 'http:') +
        '//www.googletagservices.com/tag/js/gpt.js'
      var head = document.getElementsByTagName('head')[0]
      head.appendChild(gads)
    </script>
    <% } %>

    <!--
      @gladly-customization:
      Quantcast Choice Consent Manager Tag
      This is paired with our QuantcastChoiceCMP component.
      https://www.quantcast.com/gdpr/quantcast-choice-self-serve/
      https://quantcast.zendesk.com/hc/en-us/articles/360003814853-Technical-Implementation-Guide
    -->
    <script type="text/javascript" async=true>
      /* eslint-disable */
      var __cmp = (function () {
        return typeof (__cmp) == "function" ? __cmp : function (c) {
          var b = arguments;
          if (!b.length) {
            return __cmp.a;
          }
          else if (c == '__cmp')
            return false;
          else {
            if (typeof __cmp.a === 'undefined') {
              __cmp.a = [];
            }
            __cmp.a.push([].slice.apply(b));
          }
        }
      })();
    </script>

    <% if (process.env.REACT_APP_WHICH_APP === "newtab"){ %>
    <!--
      @gladly-customization:
      Amazon apstag
    -->
    <script>
    /* eslint-disable */
    !function(a9,a,p,s,t,A,g){if(a[a9])return;function q(c,r){a[a9]._Q.push([c,r])}a[a9]={init:function(){q("i",arguments)},fetchBids:function(){q("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]};A=p.createElement(s);A.async=!0;A.src=t;g=p.getElementsByTagName(s)[0];g.parentNode.insertBefore(A,g)}("apstag",window,document,"script","//c.amazon-adsystem.com/aax2/apstag.js");
    </script>
    <% } %>

    <% if (process.env.REACT_APP_WHICH_APP === "newtab"){ %>
    <!--
      @gladly-customization:
      Index Exchange. See:
      https://kb.indexexchange.com/Wrapper/Installation/Universal_Library_Implementation.htm
    -->
    <script async src="//js-sec.indexww.com/ht/p/189508-208262485043658.js"></script>
    <% } %>
    
  </body>
</html>
